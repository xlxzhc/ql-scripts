
# ql-scripts

青龙面板自动化任务脚本合集

## 📁 项目结构

```
ql-scripts/
├── jlc.py                  # 嘉立创自动签到脚本
├── xxyx.js                 # 晓晓优选能量任务脚本
├── xiaomi_motion.js        # 小米运动刷步数脚本
├── sendNotify.js           # 青龙通知模块
├── userscripts/            # 油猴脚本目录
│   └── jlc_token.js        # 嘉立创Token抓取助手
└── README.md
```

##  脚本列表

### 1. 嘉立创自动签到 (jlc.py)

自动完成嘉立创平台的每日签到任务，支持多账号和连签奖励领取。

> 📌 本脚本基于 [Foticing/LC-AutoSign](https://github.com/Foticing/LC-AutoSign) 修改而来

#### 功能特性

- ✅ 自动每日签到
- ✅ 自动领取连签奖励（第7天）
- ✅ 支持多账号执行
- ✅ 账号脱敏显示
- ✅ 青龙面板通知推送

#### 环境变量配置

| 变量名 | 说明 | 必填 | 示例 |
|--------|------|------|------|
| `jlcToken` | 嘉立创Token，多个账号用`&`或换行符分隔 | 是 | `token1&token2` |

#### Token 获取方式

使用 [`userscripts/jlc_token.js`](userscripts/jlc_token.js) 油猴脚本在移动端抓取：

1. 安装油猴脚本（Tampermonkey）
2. 添加 `jlc_token.js` 脚本
3. 访问 https://m.jlc.com 并登录
4. 点击页面右侧的"抓取Token"悬浮球
5. Token 将自动复制到剪贴板

#### 定时任务

```
cron: 0 8 * * *
```

每天早上8点执行

---

### 2. 晓晓优选能量任务 (xxyx.js)

自动完成晓晓优选平台的能量任务，包括每日签到和完成各种任务以获取能量。

#### 功能特性

- ✅ 自动签到获取能量
- ✅ 完成分享海报任务
- ✅ 完成观看视频任务
- ✅ 支持多账号执行
- ✅ 实时统计能量获取情况
- ✅ 可选的自动兑换功能（兑换最便宜的可用商品）

#### 环境变量配置

| 变量名 | 说明 | 必填 | 示例 |
|--------|------|------|------|
| `XXYX_TOKENS` | 用户token，多个账号用&分隔 | 是 | `token1&token2` |
| `XXYX_EXCHANGE` | 是否启用自动兑换功能 | 否 | `true` 或 `false` |

#### 入口地址

```
https://plus.web.xxyx.ltd/#/?uid=2042976&source=cityChallengeOther
```

扫描二维码进入:

```
    █▀▀▀▀▀█ ▄▄▀██ ▀█ ▀▄▀█▀██▄█ ██ █▀▀▀▀▀█    
    █ ███ █ ██▀▄▀▄█▀  █  █▄█▄▄▄▄▄ █ ███ █    
    █ ▀▀▀ █  ▀▀ █ ▄▄▀█  ▄▀ ▀▄▀  █ █ ▀▀▀ █    
    ▀▀▀▀▀▀▀ █▄█ ▀▄▀▄▀▄█ █ █ ▀▄█ █ ▀▀▀▀▀▀▀    
    █▄▄▄▄ ▀ █  ▄▀▄  █▄▄▀ █  █▄▀▀▀██▄▄▀▀█     
     ██ ▄▀▀▀█▄▀ ▄▀▄▀▀▄▄█▄ █ █▀▀▀▀ █▄██▄▀█    
    █▀▀  ▀▀▀ ▀▄█▄▀ ▀▄▀▄▄ ▄▀█ ▄▄▄█ ▀▄ ▄▀▄█    
    ▀▀█▄▀█▀▀▀  ▀ ▄▀   ▀  ▄█ ▀  █▀ ██▀█▄ ▄    
    ▄█▄ ▀▄▀▄▄▄ ▀▄██ ▄▄▀ ▀▀▀▀█▄█▀▀█▄▀  ██     
    ▄ █▀▀█▀▀▀█ ▄▀▄█▄█▀▄▀  █ ▀▀▀█  ▄▄█▄▀ █    
      ▀▀▀▄▀▄▀█▄█▀▄▀ █▄▄▄  ▄█▀▀▀▄▀█▀ █▀▄▄▄    
    ▄███  ▀▀ ▄██▄▄▀ ▀█▄ ▀▀▄▄▀█▄█▄  ███ ██    
    ████ ▄▀▄██ ▀  ▄  █▄ ███  █▄  ██▄▀▄▄      
    █ ▄▄ ▀▀▀███ █ █▀█▀██  ▀ ▄ ▄████ ▀▄███    
    ▀ ▀ ▀▀▀ ▄ █▄▄█▀▀   █▄▄▄████ █▀▀▀█  ▄█    
    █▀▀▀▀▀█  ▀█ ▄█▄▄█▀▀▀▄▄ ▀█▀▄ █ ▀ █  ▄     
    █ ███ █  ██▄▄▀█▀ ▄▀ ███▀▄▄ █▀██▀▀ ▀      
    █ ▀▀▀ █  █  ▀▀▄▄▄ ▀ ▀ █▄█ ▄█ ▀  ▄█▄ █    
    ▀▀▀▀▀▀▀ ▀▀ ▀ ▀  ▀▀▀▀        ▀▀▀▀  ▀ ▀    
```

#### 使用方法

1. 在青龙面板添加环境变量 `XXYX_TOKENS`
2. (可选) 设置 `XXYX_EXCHANGE=true` 启用自动兑换
3. 运行脚本

---

### 2. 小米运动刷步数 (xiaomi_motion.js)

自动修改小米运动/Zepp Life的步数数据，支持多账号和自定义步数范围。

#### 功能特性

- ✅ 支持手机号和邮箱登录
- ✅ 支持多账号批量执行
- ✅ 自定义步数范围
- ✅ 智能Token缓存机制
- ✅ 详细的日志记录
- ✅ 青龙面板通知推送

#### 环境变量配置

**方式1: 使用 XIAOMI_ACCOUNTS（推荐）**

| 变量名 | 说明 | 必填 | 示例 |
|--------|------|------|------|
| `XIAOMI_ACCOUNTS` | 账号信息，格式为 `账号&密码&步数范围`，多个账号用#分隔 | 是 | `13800138000&123456&15000-20000#user@example.com&654321&18000` |

**方式2: 分别设置**

| 变量名 | 说明 | 必填 | 示例 |
|--------|------|------|------|
| `XIAOMI_USERS` | 用户名（手机号或邮箱），多个用#分隔 | 是 | `13800138000#user@example.com` |
| `XIAOMI_PASSWORDS` | 密码，多个用#分隔 | 是 | `123456#654321` |
| `XIAOMI_STEPS` | 步数范围，多个用#分隔 | 否 | `15000-20000#18000` |

#### 步数范围说明

- 支持范围格式: `15000-20000` (在15000到20000之间随机)
- 支持固定值: `18000` (在16000到20000之间随机，即±2000)
- 默认范围: `8000-25000`

#### 定时任务

```
cron: 0 9,15 * * *
```

每天9点和15点执行

#### 使用方法

1. 在青龙面板添加环境变量（选择方式1或方式2）
2. 添加定时任务
3. 运行脚本

#### 技术说明

- 基于 Zepp Life (原小米运动) API
- 参考项目: 
  - [TonyJiangWJ/mimotion](https://github.com/TonyJiangWJ/mimotion)
  - [hanximeng/Zepp_API](https://github.com/hanximeng/Zepp_API)
- 使用AES-128-CBC加密
- 智能Token管理，减少登录频率

---

## 🚀 安装依赖

```bash
# 安装必要的依赖包
npm install axios crypto uuid
```

或者在青龙面板中，进入"依赖管理"，添加以下NodeJS依赖:

- `axios`
- `uuid`

## 📝 使用说明

### 1. 添加脚本

将脚本文件上传到青龙面板的 `/ql/scripts` 目录，或通过订阅功能添加。

### 2. 配置环境变量

在青龙面板的"环境变量"中添加对应脚本所需的变量。

### 3. 添加定时任务

在青龙面板的"定时任务"中添加任务，选择对应的脚本文件。

### 4. 运行测试

首次配置完成后，建议手动运行一次测试是否正常工作。

## ⚠️ 注意事项

1. **账号安全**: 请妥善保管账号密码，建议使用环境变量配置，不要在代码中硬编码
2. **Token缓存**: 小米运动脚本会在本地缓存Token信息，减少登录频率
3. **步数合理性**: 建议设置合理的步数范围，避免数值过大引起异常
4. **多账号延迟**: 脚本会在处理多个账号时自动添加延迟，避免请求过于频繁
5. **通知功能**: 需要配置青龙面板的通知功能才能接收执行结果推送

## 📊 日志说明

脚本执行时会输出详细的日志信息：

- `[INFO]`: 一般信息
- `[SUCCESS]`: 操作成功
- `[WARN]`: 警告信息
- `[ERROR]`: 错误信息

## 🔧 故障排查

### 晓晓优选脚本

1. **Token无效**: 检查环境变量 `XXYX_TOKENS` 是否正确配置
2. **任务失败**: 查看日志中的具体错误信息，可能是网络问题或接口变化
3. **兑换失败**: 确认账号能量充足，商品库存充足

### 小米运动脚本

1. **登录失败**:
   - 检查账号密码是否正确
   - 确认账号类型（手机号需要+86前缀）
   - 查看是否有验证码或账号被限制
2. **修改步数失败**:
   - Token已过期，脚本会自动重新登录
   - 网络连接问题
3. **缓存问题**: 删除 `cache` 目录下的缓存文件重试

## 🔌 油猴脚本

本项目包含一些辅助用的油猴脚本，存放在 `userscripts/` 目录下。

### JLC/开源平台 Token 抓取助手 (jlc_token.js)

专为移动端设计的Token抓取脚本，支持嘉立创和开源硬件平台。

> 📌 本脚本基于 [zhangMonday/PCBfactory-auto-check-in](https://github.com/zhangMonday/PCBfactory-auto-check-in) 修改而来

#### 功能特性

- ✅ 一键提取嘉立创 Token
- ✅ 一键提取开源硬件平台 Cookie
- ✅ 自动复制到剪贴板
- ✅ 移动端友好的悬浮球设计

#### 支持平台

| 平台 | 域名 | 提取内容 |
|------|------|----------|
| 嘉立创 | m.jlc.com | Token |
| 开源硬件平台 | oshwhub.com | Cookie |

#### 安装方法

1. 安装 [Tampermonkey](https://www.tampermonkey.net/) 浏览器扩展
2. 点击 Tampermonkey 图标 -> 添加新脚本
3. 复制 [`userscripts/jlc_token.js`](userscripts/jlc_token.js) 的内容并保存
4. 访问对应网站即可使用

---

## 📜 更新日志

### 2025-12-23
- ✅ 添加嘉立创自动签到脚本
- ✅ 添加油猴脚本目录和Token抓取助手
- ✅ 完善项目结构说明

### 2025-01-04
- ✅ 添加晓晓优选能量任务脚本
- ✅ 添加小米运动刷步数脚本
- ✅ 完善README文档

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 免责声明

本项目仅供学习交流使用，使用者需自行承担使用本脚本的风险。请遵守相关平台的服务条款，不要用于任何违法违规的用途。

## 📞 联系方式

如有问题或建议，欢迎提交 Issue。

## ⭐ Star History

如果这个项目对你有帮助，欢迎给个 Star ⭐

---

**Happy Automation! 🎉**
